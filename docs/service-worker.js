const CACHE_NAME="berbagi-cerita-v1",urlsToCache=["./","./index.html","./app.bundle.js","./main.css","./favicon.png","./manifest.json","./icons/icon-192x192.png","./icons/icon-512x512.png"];self.addEventListener("install",(e=>{console.log("Service Worker installing..."),e.waitUntil(caches.open(CACHE_NAME).then((async e=>{for(const a of urlsToCache)try{await e.add(a),console.log("Cached:",a)}catch(e){console.warn("Gagal cache resource:",a,e)}})))})),self.addEventListener("activate",(e=>{console.log("Service Worker activating..."),e.waitUntil(caches.keys().then((e=>Promise.all(e.map((e=>e!==CACHE_NAME?(console.log("Menghapus cache lama:",e),caches.delete(e)):null))))))})),self.addEventListener("fetch",(e=>{e.respondWith(caches.match(e.request).then((a=>a||fetch(e.request))))})),self.addEventListener("push",(e=>{console.log("Service Worker menerima push event:",e),e.waitUntil(async function(){let a={};try{a=e.data?await e.data.json():{}}catch(e){console.error("Gagal parse data push:",e)}const n=a.title||"Notifikasi Baru",o={body:a.options?.body||"Ada pesan baru buat kamu!",icon:a.options?.icon||"/icons/icon-192x192.png",badge:a.options?.badge||"/icons/icon-192x192.png"};console.log("Menampilkan notifikasi:",n,o),await self.registration.showNotification(n,o)}())}));